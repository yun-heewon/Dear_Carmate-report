# Dear_Carmate ê°œì¸ ê°œë°œ ë¦¬í¬íŠ¸

## 1. ğŸ“‘í”„ë¡œì íŠ¸ ê°œìš”
-  Dear CarmateëŠ” ì¤‘ê³ ì°¨ ë”œëŸ¬ë“¤ì´ ì‚¬ìš©í•˜ëŠ” ì¤‘ê³ ì°¨ ê³„ì•½ ê´€ë¦¬ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. ì°¨ëŸ‰ê³¼ ê³ ê°, ê³„ì•½ ê´€ë¦¬ì— íŠ¹í™”ëœ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ì—¬ ì‚¬ìš©ìì˜ ì—…ë¬´ íš¨ìœ¨ì„ ë†’ì´ê³ , ë§¤ì¶œ ë¶„ì„ê¹Œì§€ ê°€ëŠ¥í•©ë‹ˆë‹¤.
-  í”„ë¡œì íŠ¸ ê¸°ê°„: 2025.07.22~2025.08.13
-  ì£¼ìš” ê¸°ëŠ¥: auth API/ user API/ company API/ car API/ customer API/ contract API/ contract-document API/ image API/ dashboard API
---
## 2. âš™ï¸ ê¸°ìˆ  ìŠ¤íƒ

<h3 align="center"><b>ğŸ“š Languages ğŸ“š</b></h3>

<p align="center"> <img src="https://img.shields.io/badge/TypeScript-3178C6?style=for-the-badge&logo=typescript&logoColor=white" /> 
<img src="https://img.shields.io/badge/Node.js-339933?style=for-the-badge&logo=node.js&logoColor=white" /> </p>

<h3 align="center"><b>âš™ï¸ Frameworks & Libraries</b></h3>

<p align="center"> <img src="https://img.shields.io/badge/Express-000000?style=for-the-badge&logo=express&logoColor=white" /> <img src="https://img.shields.io/badge/Prisma-2D3748?style=for-the-badge&logo=prisma&logoColor=white" /><br/>  <img src="https://img.shields.io/badge/Passport-34E27A?style=for-the-badge&logo=passport&logoColor=white" /> <img src="https://img.shields.io/badge/Swagger-85EA2D?style=for-the-badge&logo=swagger&logoColor=black" /> <img src="https://img.shields.io/badge/ESLint-4B32C3?style=for-the-badge&logo=eslint&logoColor=white" /> <img src="https://img.shields.io/badge/Prettier-F7B93E?style=for-the-badge&logo=prettier&logoColor=black" /> </p>

<h3 align="center"><b>ğŸ—„ï¸ Database & Hosting</b></h3>

<p align="center"> <img src="https://img.shields.io/badge/PostgreSQL-4169E1?style=for-the-badge&logo=postgresql&logoColor=white" /> <img src="https://img.shields.io/badge/Render-0099E5?style=for-the-badge&logo=render&logoColor=white" /> </p>

<h3 align="center"><b>ğŸ”§ Development Tools </b></h3>

<p align="center"> <img src="https://img.shields.io/badge/GitHub-181717?style=for-the-badge&logo=github&logoColor=white" /> <img src="https://img.shields.io/badge/Nodemon-76D04B?style=for-the-badge&logo=nodemon&logoColor=white" /> <img src="https://img.shields.io/badge/TS Node-3178C6?style=for-the-badge&logo=ts-node&logoColor=white" /> <img src="https://img.shields.io/badge/Dotenv-ECD53F?style=for-the-badge&logo=dotenv&logoColor=black" /> </p>


<h3 align="center"><b>ğŸ” Authentication & Utility Libraries </b></h3>
<p align="center">
  <img src="https://img.shields.io/badge/JWT-000000?style=for-the-badge&logo=JSON%20web%20tokens&logoColor=white" alt="JWT" />
  <img src="https://img.shields.io/badge/Nodemailer-009966?style=for-the-badge&logo=gmail&logoColor=white" alt="Nodemailer" />
  <img src="https://img.shields.io/badge/Multer-1E90FF?style=for-the-badge&logo=files&logoColor=white" alt="Multer" />
  <img src="https://img.shields.io/badge/Firebase-FFCA28?style=for-the-badge&logo=firebase&logoColor=black" alt="Firebase" />
</p>

<h3 align="center"><b> ğŸ¤ Collaboration Tools </b></h3>
<p align="center"> <img src="https://img.shields.io/badge/Notion-000000?style=for-the-badge&logo=notion&logoColor=white" alt="Notion" /> <img src="https://img.shields.io/badge/GitHub-181717?style=for-the-badge&logo=github&logoColor=white" alt="GitHub" /> <img src="https://img.shields.io/badge/Discord-5865F2?style=for-the-badge&logo=discord&logoColor=white" alt="Discord" /> </p>

---
## 3. ğŸ‘“ë‹´ë‹¹ ì‘ì—… 
### 1. Company API
: ì–´ë“œë¯¼ë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” í˜ì´ì§€ë¡œ íšŒì‚¬ ëª©ë¡/ íšŒì‚¬ë³„ ìœ ì € ëª©ë¡ ì¡°íšŒ ê°€ëŠ¥ 

: ì–´ë“œë¯¼ë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ authorizeAdmin ë¯¸ë“¤ì›¨ì–´ ì½”ë“œë¥¼ ì¶”ê°€í•¨
- íšŒì‚¬ ë“±ë¡
- íšŒì‚¬ ëª©ë¡ ì¡°íšŒ
- íšŒì‚¬ë³„ ìœ ì € ì¡°íšŒ
- íšŒì‚¬ ìˆ˜ì •
- íšŒì‚¬ ì‚­ì œ

### 2. Car API
: í•´ë‹¹ íšŒì‚¬ì˜ ì°¨ëŸ‰ë§Œ ì¡°íšŒ/ ìˆ˜ì •/ ì‚­ì œ ê°€ëŠ¥í•˜ë„ë¡ êµ¬í˜„

: í”„ë¡ íŠ¸ì—”ë“œì™€ì˜ ì—°ë™ì„ ìœ„í•´ converter.ts íŒŒì¼ ì¶”ê°€ 
- ì°¨ëŸ‰ ë“±ë¡
- ì°¨ëŸ‰ ëª©ë¡ ì¡°íšŒ
- ì°¨ëŸ‰ ìˆ˜ì •
- ì°¨ëŸ‰ ì‚­ì œ
- ì°¨ëŸ‰ ìƒì„¸ ì •ë³´ ì¡°íšŒ
- ì°¨ëŸ‰ ë°ì´í„° ëŒ€ìš©ëŸ‰ ì—…ë¡œë“œ
- ì°¨ëŸ‰ ëª¨ë¸ ëª©ë¡ ì¡°íšŒ

### 3. ê·¸ ì™¸
- firebase ì—°ê²°
  - firebase storage ìƒì„±
  - firebase-admin.ts ì‘ì„±
 
---
## 4. ğŸ–¥ï¸ ê¸°ëŠ¥ êµ¬í˜„ ì˜ˆì‹œ
### íšŒì‚¬ ë“±ë¡
: ì–´ë“œë¯¼ ê³„ì •ì€ íšŒì‚¬ì´ë¦„ê³¼ ì½”ë“œë¥¼ ì…ë ¥í•˜ì—¬ íšŒì‚¬ ë“±ë¡ ê°€ëŠ¥
<img width="1195" height="583" alt="íšŒì‚¬ ìƒì„±" src="https://github.com/user-attachments/assets/5916aae0-d029-4c57-8b83-415ca0e94966" />

### íšŒì‚¬ ëª©ë¡ ì¡°íšŒ 
: ì–´ë“œë¯¼ ê³„ì •ì€ íšŒì‚¬ ëª©ë¡ ì¡°íšŒê°€ ê°€ëŠ¥í•˜ë©°, í˜ì´ì§€ë„¤ì´ì…˜ê³¼ ê²€ìƒ‰ ê¸°ëŠ¥ ê°€ëŠ¥í•¨
#### ëª©ë¡ ì¡°íšŒ
<img width="1188" height="776" alt="ì»´íŒ¨ë‹ˆ ì¡°íšŒ" src="https://github.com/user-attachments/assets/e7163190-cf1a-4bec-b52a-e22263785579" />

#### í˜ì´ì§€ë„¤ì´ì…˜
<img width="1192" height="771" alt="íšŒì‚¬ í˜ì´ì§€ë„¤ì´ì…˜" src="https://github.com/user-attachments/assets/7c4e62a8-a306-46b7-9d21-1009a3ffb532" />

#### íšŒì‚¬ì´ë¦„ ê²€ìƒ‰
<img width="1191" height="686" alt="íšŒì‚¬ ê²€ìƒ‰ ê°€ëŠ¥" src="https://github.com/user-attachments/assets/ed6a015f-2d52-433d-93ff-e5c4ca36f4c0" />


### íšŒì‚¬ë³„ ìœ ì € ì¡°íšŒ
: ì–´ë“œë¯¼ ê³„ì •ì€ ìœ ì € ëª©ë¡ ì¡°íšŒê°€ ê°€ëŠ¥í•˜ë©°, í˜ì´ì§€ë„¤ì´ì…˜ê³¼ ê²€ìƒ‰ ê¸°ëŠ¥ ê°€ëŠ¥í•¨
#### ëª©ë¡ ì¡°íšŒ
<img width="1188" height="780" alt="ìœ ì € ì¡°íšŒ" src="https://github.com/user-attachments/assets/a664afa3-9d05-42cb-a472-5c3df21b02b6" />

#### í˜ì´ì§€ë„¤ì´ì…˜
<img width="1181" height="768" alt="ìœ ì € í˜ì´ì§€ë„¤ì´ì…˜" src="https://github.com/user-attachments/assets/7bd7f00e-ea38-462f-92a2-21df3977944d" />

#### ì§ì›ì´ë¦„ ê²€ìƒ‰
<img width="1159" height="766" alt="ìœ ì € ì´ë¦„ ê²€ìƒ‰" src="https://github.com/user-attachments/assets/f121b6bc-0f1c-40a8-8074-23d7f01ea53c" />

### íšŒì‚¬ ìˆ˜ì •
<img width="1188" height="592" alt="íšŒì‚¬ ìˆ˜ì •" src="https://github.com/user-attachments/assets/6c4e142d-52e5-484d-ab1f-06006bb0538e" />

### íšŒì‚¬ ì‚­ì œ
<img width="1189" height="552" alt="íšŒì‚¬ ì‚­ì œ" src="https://github.com/user-attachments/assets/d7b80b07-d526-4104-9c44-3b544fb8001c" />


### ì°¨ëŸ‰ ë“±ë¡
: statusëŠ” ê¸°ë³¸ê°’ ë“±ë¡
<img width="1197" height="756" alt="ì°¨ëŸ‰ ìƒì„±" src="https://github.com/user-attachments/assets/8de61922-325a-48b2-bfe0-a906e95c884b" />

### ì°¨ëŸ‰ ëª©ë¡ ì¡°íšŒ
: íšŒì‚¬ì— ì†í•œ ì°¨ëŸ‰ ì¡°íšŒ ê°€ëŠ¥í•˜ë©° í˜ì´ì§€ë„¤ì´ì…˜ê³¼ ê²€ìƒ‰ ê¸°ëŠ¥ ê°€ëŠ¥í•¨
#### ëª©ë¡ ì¡°íšŒ
<img width="1151" height="814" alt="ì°¨ëŸ‰ ì¡°íšŒ" src="https://github.com/user-attachments/assets/bd4bb295-8267-4b84-b26c-df7114fe181e" />

### í˜ì´ì§€ë„¤ì´ì…˜
<img width="1485" height="789" alt="get í˜ì´ì§€ë„¤ì´ì…˜2" src="https://github.com/user-attachments/assets/23580e82-6bce-476c-bef8-53926100529b" />

### ì°¨ëŸ‰ë²ˆí˜¸ ê²€ìƒ‰
<img width="1188" height="775" alt="ì°¨ëŸ‰ë²ˆí˜¸í˜ì´ì§€ë„¤ì´ì…˜" src="https://github.com/user-attachments/assets/baf28831-7949-41f2-936d-76496509e0c8" />

### ì°¨ëŸ‰ ìˆ˜ì •
<img width="1466" height="736" alt="patch" src="https://github.com/user-attachments/assets/fea463b9-d2c2-48ea-a804-67d9f5fd1194" />

### ì°¨ëŸ‰ ì‚­ì œ
<img width="1483" height="532" alt="delete" src="https://github.com/user-attachments/assets/a662c19d-2f83-44cd-9365-a33bb3f19488" />

### ì°¨ëŸ‰ ìƒì„¸ ì¡°íšŒ
<img width="1487" height="496" alt="get ìƒì„¸ì¡°íšŒ" src="https://github.com/user-attachments/assets/dfcdba1f-2bce-40c9-9602-fe6480433510" />

### ì°¨ëŸ‰ë³„ ëª¨ë¸ ì¡°íšŒ
<img width="1193" height="774" alt="ì°¨ëŸ‰ë³„ ëª¨ë¸ ì¡°íšŒ" src="https://github.com/user-attachments/assets/fe3387f7-21aa-4fec-a334-50cd0d946d7c" />

### csc ëŒ€ìš©ëŸ‰ ì—…ë¡œë“œ 
<img width="1486" height="467" alt="csv ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸" src="https://github.com/user-attachments/assets/2675187d-133d-4b59-a4be-7a6914a794c6" />

### authorizeAdmin ì½”ë“œ ì¶”ê°€ 
: company APIì˜ ê²½ìš° ê´€ë¦¬ìë§Œ ì ‘ì† ê°€ëŠ¥í•œ í˜ì´ì§€ì´ê¸° ë•Œë¬¸ì— ê´€ë¦¬ìì¸ì§€ í™•ì¸í•˜ëŠ” ì½”ë“œë¥¼ ì¶”ê°€í•¨
```
export const authorizeAdmin = (req: AuthRequest, res: Response, next: NextFunction): void => {
  if (!req.user) {
    res.status(401).json({ message: 'ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.' });
    return;
  }
  // ê´€ë¦¬ì ê¶Œí•œ í™•ì¸
  if (req.user.isAdmin) {
    next();
  } else {
    res.status(403).json({ message: 'ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤' });
  }
};
```
```
const CompaniesRouter = (prisma: PrismaClient): Router => {
  const router = Router();

  const companyRepository = new CompanyRepository(prisma);
  const companyService = new CompanyService(companyRepository);
  const companyController = new CompanyController(companyService);

  router.use(isAuthenticated);
  router.use(authorizeAdmin);
.
.
.
```

### Firebase admin sdk ì´ˆê¸°í™” ì½”ë“œ ì‘ì„±
: Firebase storage ìƒì„± í›„ firebase-admin.ts íŒŒì¼ ì‘ì„±
- **Node.jsê°™ì€ ì„œë²„ í™˜ê²½ì—ì„œëŠ” Firebaseì˜ ëª¨ë“  ê¸°ëŠ¥ì„ ê´€ë¦¬ì ê¶Œí•œìœ¼ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ Firebase Admin SDK ì´ˆê¸°í™” ê³¼ì •ì´ í•„ìš”í•¨**
```
import * as admin from 'firebase-admin';

// í™˜ê²½ ë³€ìˆ˜ì—ì„œ ì„œë¹„ìŠ¤ ê³„ì • í‚¤ë¥¼ ì½ì–´ì˜µë‹ˆë‹¤.
const privateKey = process.env.FIREBASE_PRIVATE_KEY;
const clientEmail = process.env.FIREBASE_CLIENT_EMAIL;
const projectId = process.env.FIREBASE_PROJECT_ID;
const storageBucket = process.env.FIREBASE_STORAGE_BUCKET;

// í™˜ê²½ ë³€ìˆ˜ê°€ ëª¨ë‘ ì„¤ì •ë˜ì—ˆëŠ”ì§€ í™•ì¸
if (!privateKey || !clientEmail || !projectId || !storageBucket) {
  throw new Error('Firebase environment variables are not all set.');
}

if (!admin.apps.length) {
  admin.initializeApp({
    credential: admin.credential.cert({
      projectId,
      clientEmail,
      privateKey: privateKey.replace(/\\n/g, '\n'), // ê°œí–‰ ë¬¸ì ì²˜ë¦¬
    }),
    storageBucket,
  });
}

export default admin;
```

1) process.envë¥¼ í†µí•´ .envì— ì„¤ì •ëœ ì„œë¹„ìŠ¤ ê³„ì • ì •ë³´ë¥¼ ê°€ì ¸ì˜´
2) ifë¬¸ì„ í†µí•´ í™˜ê²½ë³€ìˆ˜ê°€ ëª¨ë‘ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•˜ë©°, í•˜ë‚˜ë¼ë„ ì—†ì„ ì‹œì—ëŠ” Errorë¥¼ ë°œìƒì‹œí‚´
3) admin.credential.cert() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ Firebase ì„œë¹„ìŠ¤ ê³„ì • í‚¤ë¥¼ ì¸ì¦ ì •ë³´ë¡œ ë³€í™˜
4) admin.initializeApp() í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ Firebase Admin SDKë¥¼ ì´ˆê¸°í™”


---
## 5. ğŸ—’ï¸ë¬¸ì œì  ë° í•´ê²° ê³¼ì •
### í”„ë¡ íŠ¸ì—”ë“œì™€ì˜ ì—°ë™ ë¬¸ì œ 
: í”„ë¡ íŠ¸ì—”ë“œë¡œ ì§€ì •ë˜ì–´ ìˆëŠ” ê°’ê³¼, responsesì˜ ê°’ì´ ë‹¬ë¼ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ê°’ì´ ë³´ì´ì§€ ì•ŠëŠ” ì˜¤ë¥˜
- ë¬¸ì œ í™•ì¸ ê³¼ì •
1) ìŠ¤í‚¤ë§ˆ ì„¤ì •ì—ì„œ mapì„ í†µí•´ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì§€ì •í•œ enumê°’ (possession,contractProceeding, contractCompleted)ê³¼ ë™ì¼í•˜ê²Œ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥
2) í”„ë¡ íŠ¸ì—”ë“œ ì—°ë™ í…ŒìŠ¤íŠ¸ì—ì„œ ì°¨ëŸ‰ status ê°’ì´ ë‚˜ì˜¤ì§€ ì•ŠëŠ” ê²ƒì„ í™•ì¸í•˜ê²Œ ë¨
3) console.logë¥¼ í†µí•´ í™•ì¸í•´ë³´ë‹ˆ responsesê°€ (POSSESSION, CONTRACT_PROCEEDING, CONTRACT_COMPLETED)ë¡œ ë‚˜ì˜¤ëŠ” ê²ƒì„ í™•ì¸í•¨
4) ë§¤í•‘ ì½”ë“œë¥¼ ì‘ì„±í•˜ì—¬ responsesë¡œ ì§€ì •ë˜ì–´ ìˆëŠ” enumì„ ë™ì¼í•˜ê²Œ ë§ì¶°ì¤Œ
 
- ë¬¸ì œ í•´ê²° ë°©ë²•
1) car.converter.ts íŒŒì¼ ì‘ì„±
```
import { CarStatus, CarType } from '@prisma/client';

/**
 * CarStatus Enumì„ camelCaseë¡œ ë³€í™˜
 */
export function carStatusToCamelCase(status: CarStatus | null): string | null {
  if (!status) return null;

  const statusMapping: Record<CarStatus, string> = {
    [CarStatus.POSSESSION]: 'possession',
    [CarStatus.CONTRACT_PROCEEDING]: 'contractProceeding',
    [CarStatus.CONTRACT_COMPLETED]: 'contractCompleted',
  };

  return statusMapping[status] || status;
}

/**
 * CarType Enumì„ í•œê¸€ë¡œ ë³€í™˜
 */
export function carTypeToKorean(type: CarType | null): string | null {
  if (!type) return null;

  const typeMapping: Record<CarType, string> = {
    [CarType.COMPACT]: 'ê²½Â·ì†Œí˜•',
    [CarType.MIDSIZE]: 'ì¤€ì¤‘Â·ì¤‘í˜•',
    [CarType.FULLSIZE]: 'ëŒ€í˜•',
    [CarType.SPORTS]: 'ìŠ¤í¬ì¸ ì¹´',
    [CarType.SUV]: 'SUV',
  };

  return typeMapping[type] || type;
}

/**
 * Car ì—”í‹°í‹°ì˜ enum í•„ë“œë“¤ì„ ë³€í™˜
 */
export function convertCarEnums(car: { status: CarStatus | null; type: CarType | null }) {
  return {
    status: carStatusToCamelCase(car.status),
    type: carTypeToKorean(car.type),
  };
}

```

2) returnì— ë°˜ì˜
```
  return {
      id: newCar.id,
      carNumber: newCar.carNumber,
      manufacturer: newCar.manufacturer,
      model: newCar.model,
      type: carTypeToKorean(newCar.type) as CarType,
      manufacturingYear: newCar.manufacturingYear,
      mileage: newCar.mileage,
      price: newCar.price.toNumber(),
      accidentCount: newCar.accidentCount,
      explanation: newCar.explanation,
      accidentDetails: newCar.accidentDetails,
      status: carStatusToCamelCase(newCar.status) as CarStatus,
    };
```

### í˜ì´ì§€ë„¤ì´ì…˜ ì˜¤ë¥˜ 
: findMany í•¨ìˆ˜ì— í˜ì´ì§€ë„¤ì´ì…˜ì„ ìœ„í•œ takeì™€ skipì¸ìê°€ ì˜¬ë°”ë¥´ê²Œ ì „ë‹¬ë˜ì§€ ì•Šì•„ ë°œìƒí•œ ì˜¤ë¥˜ 
- ë¬¸ì œ í™•ì¸ ê³¼ì •
1) get API í…ŒìŠ¤íŠ¸ ì‹œ ì—ëŸ¬ ë°œìƒ
```
[ERROR] 
Invalid `this.prisma.car.findMany()` invocation in
/home/yun-heewon/Dear_Carmate_be/src/cars/repository.ts:35:28

  32 }
  33 
  34 async findManyCar(options: FindManyCarOptions) {
â†’ 35   return this.prisma.car.findMany({
         skip: NaN,
         where: {
           companyId: 166
         },
         orderBy: {
           id: "asc"
         },
       + take: Int
       })

Argument `take` is missing.
```
2) take ì¸ì ëˆ„ë½ê³¼ skip ì¸ìë¡œ NaNì´ ì „ë‹¬ë¨ì„ í™•ì¸
3) ë°ì´í„°ê°€ ë¬¸ìì—´ì¸ ìƒíƒœ ê·¸ëŒ€ë¡œ Prisma ì¿¼ë¦¬ì— ì‚¬ìš©ë˜ì—ˆê³ , ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì‹¤ì œë¡œ ë¬¸ìì—´ì„ ìˆ«ìë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì •ì´ ìƒëµë¨.
4) get API í…ŒìŠ¤íŠ¸ ì‹œ ì¿¼ë¦¬ë¡œ pageì™€ pageSizeë¥¼ ì‘ì„±í•´ì£¼ë©´ ì˜¤ë¥˜ê°€ ë‚˜ì§€ ì•Šê³ , í”„ë¡ íŠ¸ì—”ë“œì—ì„œëŠ” ì œëŒ€ë¡œ ì‘ë™í•˜ë‚˜ ì¿¼ë¦¬ë¥¼ ë„£ì–´ì£¼ì§€ ì•Šì•„ë„ ë™ì‘í•˜ë„ë¡ ì½”ë“œ ìˆ˜ì •

- ë¬¸ì œ í•´ê²° ë°©ë²•
: plainToTinstance ì‚¬ìš©í•˜ì—¬ íƒ€ì…ì„ ë³€í™˜

```
getCarList = async (req: Request, res: Response, next: NextFunction) => {
    try {
      const query: CarListQueryDto = req.query as unknown as CarListQueryDto;
      const companyId = req.user?.companyId;

      if (!companyId) {
        return res.status(401).json({ message: 'ì¸ì¦ë˜ì§€ ì•Šì€ ì‚¬ìš©ìì…ë‹ˆë‹¤.' });
      }
      const carList = await this.carService.getCarList(query, companyId);
      return res.status(200).json(carList);
    } catch (error) {
      return next(error);
    }
  };

                                â†“

getCarList = async (req: Request, res: Response, next: NextFunction) => {
    try {
      const query = plainToInstance(CarListQueryDto, req.query);
      const companyId = req.user?.companyId;

      if (!companyId) {
        return res.status(401).json({ message: 'ì¸ì¦ë˜ì§€ ì•Šì€ ì‚¬ìš©ìì…ë‹ˆë‹¤.' });
      }
      const carList = await this.carService.getCarList(query, companyId);
      return res.status(200).json(carList);
    } catch (error) {
      return next(error);
    }
  };
```
- const query: CarListQueryDto = req.query as unknown as CarListQueryDto; ë¥¼ const query = plainToInstance(CarListQueryDto, req.query); ë¡œ ì½”ë“œ ë³€ê²½
- plainToTnstanceì˜ ì—­í• 
  : ê¸°ì¡´ ì½”ë“œëŠ” íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ì—ê²Œ Dto íƒ€ì…ì´ ë§ë‹¤ê³  ì†ì´ëŠ” ì½”ë“œë¡œ ì‘ë™, **plainToInstanceë¥¼ í†µí•´ Dtoì— ì •ì˜ëœ ë°ì½”ë ˆì´í„°ë¥¼ ì½ê³  ë¬¸ìì—´ì„ ìˆ«ìì—´ë¡œ ë³€í™˜í•´ì¤Œ**

  
---
## 6. ğŸ‘¥í˜‘ì—… ë° ì½”ë“œë¦¬ë·°
### ë°ì¼ë¦¬ ìŠ¤í¬ëŸ¼ ì§„í–‰
- ë§¤ì¼ ì•„ì¹¨ issue íƒ­ì—ì„œ todo ìƒì„± í›„ ë°ì¼ë¦¬ ìŠ¤í¬ëŸ¼ ì§„í–‰
- ë°ì¼ë¦¬ìŠ¤í¬ëŸ¼ì€ <ì–´ì œ í•œ ì¼, ì˜¤ëŠ˜ í•  ì¼, ê·¸ ì™¸ ë…¼ì˜ì‚¬í•­>ë¡œ ì§„í–‰í•¨
- issue íƒ­ì— ë°ì¼ë¦¬ìŠ¤í¬ëŸ¼ ì •ë¦¬

### ì½”ë“œë¦¬ë·°
- pr ìƒì„± í›„ ì‘ì„±í•œ ì½”ë“œì™€ ì—°ê´€ì´ ìˆëŠ” ì‚¬ëŒì„ ì½”ë“œë¦¬ë·°ì–´ë¡œ ë“±ë¡
- ë¦¬ë·° í›„ ì½”ë“œ ìˆ˜ì • ê³¼ì •ì„ ë°˜ë³µ
- ë¦¬ë·°ì–´ì˜ approveì‹œ prì„ ì˜¬ë¦° ë³¸ì¸ì´ ì§ì ‘ merge

#### ì½”ë“œë¦¬ë·°ë¥¼ í†µí•´ ì•Œê²Œ ëœ ì  
- **.bind**ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì†Œë“œ ì •ì˜ì— ë”°ë¼ ì‚¬ìš©ë  ìˆ˜ ìˆê³ , ì‚¬ìš©ë˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆìŒ.
  - ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í™”ì‚´í‘œí•¨ìˆ˜ë¡œ ì‘ì„±í•œ ê²½ìš° this ì»¨í…ìŠ¤íŠ¸ë¥¼ ìì‹ ì´ ì„ ì–¸ë  ë•Œì˜ ìŠ¤ì½”í”„ì—ì„œ ì •ì ìœ¼ë¡œ ë°”ì¸ë”©í•¨
  - í™”ì‚´í‘œ í•¨ìˆ˜ë¡œ ì •ì˜í•˜ë©´ í•­ìƒ í•´ë‹¹ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¤ê²Œ ë˜ì–´ bind ì‚¬ìš©ì´ í•„ìš”í•˜ì§€ ì•ŠìŒ
  - í™”ì‚´í‘œí•¨ìˆ˜ë¥¼ ì‘ì„±í•˜ì§€ ì•Šì€ ê²½ìš°ì—ëŠ” this ì»¨í…ìŠ¤íŠ¸ë¥¼ ê³ ì •ì‹œí‚¤ëŠ” ê³¼ì •ì´ í•„ìš”í•˜ê¸° ë•Œë¬¸ì— .bind ì‚¬ìš©ì´ í•„ìš”í•¨
    
- **ì˜ì¡´ì„± ì§ì„± ìƒì„±ê³¼ ì£¼ì…ì˜ ì°¨ì´**
1) ì˜ì¡´ì„± ì§ì ‘ ìƒì„±
     - ê°ì²´ê°€ ìì‹ ì˜ ë‚´ë¶€ì—ì„œ í•„ìš”í•œ ë‹¤ë¥¸ ê°ì²´ë¥¼ ì§ì ‘ ë§Œë“œëŠ” ë°©ì‹
```
import { CarService } from './car.service';

export default class CarController {
  private readonly carService: CarService;

  constructor() {
    this.carService = new CarService(); // CarControllerê°€ ì§ì ‘ CarServiceë¥¼ ìƒì„±
  }
}
.
.
.
```
2) ì˜ì¡´ì„± ì£¼ì…
     - ì™¸ë¶€ì—ì„œ ê°ì²´ê°€ í•„ìš”ë¡œ í•˜ëŠ” ì˜ì¡´ì„±ì„ ì£¼ì…(Injection)ë°›ëŠ” ë°©ì‹

  ```
  export default class CarController {
  private readonly carService: CarService;

  constructor(carService: CarService) {
    this.carService = carService;
  }
  .
  .
  ```

    
| êµ¬ë¶„ | ì˜ì¡´ì„± ì§ì ‘ ìƒì„± | ì˜ì¡´ì„± ì£¼ì… |
| :--- | :--- | :--- |
| ì˜ì¡´ì„± íšë“ ë°©ì‹ | ê°ì²´ ë‚´ë¶€ì—ì„œ ì§ì ‘ new í‚¤ì›Œë“œë¡œ ìƒì„± | ì™¸ë¶€ì—ì„œ ê°ì²´ë¥¼ ì£¼ì…ë°›ìŒ |
| ê²°í•©ë„ | ê°•í•œ ê²°í•© | ëŠìŠ¨í•œ ê²°í•© |
| ìœ ì—°ì„± | ë‚®ìŒ(ì˜ì¡´ì„± ë³€ê²½ ì‹œ ì½”ë“œ ìˆ˜ì • í•„ìš”í•¨ | ë†’ìŒ(ì™¸ë¶€ì—ì„œ ì£¼ì…ë˜ëŠ” ê°ì²´ë§Œ ë³€ê²½|
|í…ŒìŠ¤íŠ¸ ìš©ì´ì„±| ë‚®ìŒ(mockì£¼ì…ì´ ì–´ë ¤ì›€) | ë†’ìŒ |
|ì¬ì‚¬ìš©ì„±| ë‚®ìŒ| ë†’ìŒ|
